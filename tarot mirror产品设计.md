# Tarot Mirror - 产品策划设计文档

## 📋 产品概述

### 产品名称
**Tarot Mirror**（暂定）

### 产品定位
面向全球市场的塔罗+轻治愈应用，通过塔罗占卜进行自我探索与心理疗愈，提供情绪支持、行动建议和长期陪伴。

### 目标市场
- **主推市场**：英文区（欧美市场）
- **次要市场**：中文区
- **目标用户**：18-50岁，spiritual-curious / self-growth / 轻疗愈人群

### 用户画像
- 有焦虑、关系困扰、职业迷茫、低能量状态
- 对塔罗接受度高，但希望"更温柔、更像被陪伴"的体验
- 需要情绪支持、自我洞察、行动指导

---

## 🎯 核心价值主张

**"1-Minute Ritual"** - 每天60-90秒完成"抽牌 + 微任务 + 日历印章"

- 极低负担的长期习惯养成
- 温柔陪伴式的自我探索体验
- 从占卜到行动的完整闭环

### 核心差异化

**每日塔罗 + 月相综合分析**，结合轻疗愈，形成每日运势和建议，形成日历后有周总结和月总结。

这是我们的核心差异化点：
- **塔罗 + 月相融合**：结合塔罗牌和月相能量，提供更全面的每日运势分析
- **轻疗愈闭环**：从占卜到治愈任务到情绪反馈的完整闭环
- **长期陪伴**：通过日历、周总结、月总结形成长期使用习惯和成长轨迹

---

## 🏗️ 产品架构

### 核心主线
**Daily Ritual → Diary Retention → Deep Reading → AI Companion**

1. **每日运势**（低门槛、高频）
2. **每日治愈任务**（情绪调节工具，与占卜结果联动）
3. **日历签到与总结**（长期留存、复访）
4. **专项占卜**（按问题付费/订阅）
5. **进阶追问对话**（付费增量点/订阅）
6. **AI陪伴**（长期情感链接）
7. **星盘模块**（深度个性化解读）
8. **疗愈模块**（多样化疗愈手段）

---

## 📱 功能模块详细设计

### 1. 每日运势（Daily Reading）

#### 功能描述
每日抽取一张塔罗牌，结合当日月相能量，提供综合解读、鼓励和建议。

#### 核心特色：塔罗 + 月相综合分析
- **塔罗牌抽取**：每日抽取一张塔罗牌
- **月相能量**：结合当日月相（新月、上弦月、满月、下弦月等）的能量
- **综合分析**：将塔罗牌意与月相能量融合，提供更全面的每日运势

#### 交互流程
```
长按牌堆 → 抽一张 → 翻牌动画 → 月相展示 → 综合解读展示
```

#### 输出结构
1. **今日主题赠言**（1句，融合塔罗+月相）
2. **月相能量提示**
   - 当前月相阶段（新月/上弦月/满月/下弦月）
   - 月相能量解读（1-2句）
3. **塔罗牌解读**
   - 牌面含义
   - 今日能量解读
   - 心理投射分析
4. **综合运势分析**
   - 塔罗与月相的融合解读
   - 今日能量主题
   - 适合的行动方向
5. **辅助暗示**（卡片视觉）
   - 🎨 Lucky Color（幸运色，结合月相能量）
   - 🔮 小挂件/护符建议
   - ✨ 小动作建议（可执行的具体行动）
6. **小组件支持**（iOS/Android桌面小组件）

#### 设计要点
- 翻牌动画要有仪式感
- 月相展示要有视觉美感（月相图标/动画）
- 解读文案要温柔、鼓励性，体现塔罗与月相的融合
- 辅助暗示做成精美卡片，可分享

---

### 2. 治愈任务（Healing Tasks）

#### 功能描述
将"情绪支持"落到"即时可做"，与占卜建议形成闭环。

#### 任务类型
- 正念/专注任务
- 放松/疗愈任务
- 情绪调节任务

#### 任务库（20秒-2分钟微任务）
- 注视远方一座塔楼 20秒
- 深呼吸 5次
- 闭眼默数 2001-2020
- 闭眼站立 20秒
- 仰望 20秒
- 冥想引导
- 白噪音播放
- 疗愈音乐
- 短视频动画
- 更多微任务...

#### 任务联动
- 根据今日塔罗牌结果，推荐匹配的治愈任务
- 完成任务后解锁"再来一个"选项，加强疗愈效果

#### 用户反馈
完成任务后极轻反馈：
- **情绪反馈**：+1 / 0 / -1
- **或四档情绪**：calm / same / tense / overwhelmed
- 用于生成情绪曲线

#### 留存机制
- 每日运程 + 治愈任务形成连胜机制（类似Duolingo/Finch）
- 连续签到奖励

---

### 3. 日历签到与周期总结（Calendar & Review）

#### 功能描述
将每日运势沉淀为"可回看的人生轨迹"，提高留存与复购。

#### 日历视图
- 每天一个简洁emoji（或牌面缩略符号）代表当日能量
- 点击日期可查看当日详细记录

#### 签到机制
- 来自每日运程 + 治愈任务完成
- **容错补签逻辑**：允许用户补签（有限制次数或付费解锁）

#### 周期总结

**周总结**
- 本周关键词
- 情绪曲线（用户自评 + 抽牌主题生成）
- 本周最常出现的牌面
- 本周月相变化与能量趋势
- 本周完成的任务统计
- 塔罗+月相综合分析（本周能量主题）

**月总结**
- 重复主题分析
- 常见困扰识别
- 月相周期回顾（本月经历的月相阶段）
- 塔罗牌面趋势（本月最常出现的牌面类型）
- 你最需要练习的行动建议（成长报告）
- 能量曲线/情绪曲线趋势
- 月相能量与个人能量的关联分析

#### AI生成报告
- 通过模板prompt + 用户数据记忆
- AI生成个性化周报告、月报告
- 找到能量曲线或情绪曲线的逻辑

---

### 4. 专项塔罗占卜（Question Reading）

#### 功能描述
承接用户明确诉求，提供更深入的结构化解读。

#### 交互流程
1. **问题输入**
   - 用户输入问题
   - 提供"如何问好问题"的引导模板
   - 问题分类：关系/事业/选择/健康/其他

2. **牌阵选择**
   - 3张牌（快速清晰）
   - 5张牌（关系/选择）
   - Celtic Cross（深度10张）
   - 自定义牌阵...

3. **占卜师选择**
   - 多个占卜师人设（不同LLM/不同prompt）
   - **技术实现**：
     - DeepSeek API（一个占卜师）
     - ChatGPT API（一个占卜师）
     - Gemini API（一个占卜师）
     - 每个LLM使用不同的prompt模板定义占卜师人设和解读风格
   - 每个占卜师有独特风格和解读方式
   - 用户可收藏偏好的占卜师
   - 为付费提供内容分层

4. **输出内容**
   - 牌位含义 + 牌面解释 + 主题总结
   - "心理映射问题"3条（引导自我觉察）
   - "行动建议"1-3步（可执行）
   - TTS语音播报能力

5. **多占卜师对比**（第一版暂不包含）
   - 后续版本可考虑：同一牌阵可提供"多占卜师解读对比"
   - 帮助用户从不同角度理解

#### 付费策略
- 单次解锁
- 订阅包含额度
- 深度会话包

---

### 5. 进阶追问对话（Follow-up Q&A）

#### 功能描述
把一次占卜从"读完即走"变成"我可以继续追问直到我心里更确定"。

#### 功能设计
- 用户在解读后可追问1-3次（免费次数限制）
- 追问类型按钮化：
  - "我最该注意什么？"
  - "我为什么会卡住？"
  - "给我一个今天就能做的行动"
  - "这个结果意味着什么？"
  - 自定义问题...

#### 付费策略
- 单次解锁
- 订阅包含额度
- 深度会话包

---

### 6. AI陪伴系统（AI Companion）

#### 功能描述
通过两个主形象（神秘权威占卜师 + 可爱治愈小精灵 Miri）建立情感链接，小精灵 Miri作为陪伴用户的AI角色，提供长期陪伴感和情感支持。

#### 核心设计

**1. 双形象设计**
- **占卜师形象**：神秘权威，负责深度占卜解读
- **小精灵 Miri形象**：可爱治愈，亲和力强，作为日常陪伴角色

**2. 小精灵 Miri陪伴系统**
- **聊天互动**：小精灵 Miri可以与用户聊天，了解用户情绪和状态
- **亲密度系统**：通过互动逐渐提升亲密度，解锁更多功能和对话内容
- **进化系统**：结合宠物养成逻辑，小精灵 Miri会根据亲密度和互动情况进化（外观、能力等）
- **情感记忆**：小精灵 Miri会记住用户的偏好、情绪变化、重要事件，形成个性化互动

**3. 情感链接设计**
- **逐渐了解用户**：通过长期互动，小精灵 Miri会越来越了解用户的性格、习惯、情绪模式
- **情感支持**：在用户情绪低落时提供安慰，在用户需要时给予鼓励
- **个性化回应**：基于综合记忆库，小精灵 Miri能够给出更贴合用户状态的回应

**4. 互动场景**
- **每日问候**：小精灵 Miri每日主动问候用户，了解用户状态
- **占卜陪伴**：在占卜过程中，小精灵 Miri提供陪伴和解读辅助
- **情绪疏导**：用户情绪不佳时，可以主动与小精灵 Miri聊天获得支持
- **成长见证**：小精灵 Miri见证用户的成长轨迹，在重要时刻给予反馈

**5. 宠物养成逻辑**
- **亲密度等级**：通过互动提升亲密度，解锁新功能
- **外观变化**：小精灵 Miri外观会随着亲密度和互动情况变化
- **能力解锁**：随着亲密度提升，小精灵 Miri能够提供更深入的陪伴和解读
- **收集元素**：通过完成每日任务、签到等获得元素，用于小精灵 Miri成长

#### 设计逻辑

**1. 双角色设计原因**
- **占卜师**：提供专业、权威的占卜解读，满足用户对准确性的需求
- **小精灵 Miri**：提供温暖、治愈的日常陪伴，满足用户对情感链接的需求
- **角色分工**：占卜师负责深度解读，小精灵 Miri负责日常陪伴，形成互补

**2. 亲密度系统设计**
- **设计原因**：通过亲密度系统激励用户长期使用，形成情感依赖
- **实现方式**：每日互动、完成任务、分享情绪等行为提升亲密度
- **成长反馈**：亲密度提升带来小精灵 Miri外观和能力变化，给予用户成就感

**3. 记忆系统设计**
- **设计原因**：让AI真正"了解"用户，提供个性化陪伴
- **实现方式**：结合综合记忆库（见下方），小精灵 Miri能够记住用户的偏好和状态
- **情感链接**：通过记忆形成深度情感链接，增加产品粘性

---

### 7. 星盘模块（Astrology & Natal Chart）

#### 功能描述
通过用户生日、出生时刻、出生坐标信息，制作疗愈星盘和星座解读，结合塔罗和月相能量，提供深度个性化解读。

#### 核心设计

**1. 信息收集**
- **生日信息**：年、月、日
- **出生时刻**：精确到小时和分钟（可选）
- **出生坐标**：出生地经纬度或城市名称
- **信息用途**：计算用户的本命星盘、上升星座、月亮星座等

**2. 星盘计算与展示**
- **本命星盘**：基于用户出生信息计算完整星盘
- **星盘可视化**：直观展示星盘图形和行星位置
- **关键配置**：太阳星座、月亮星座、上升星座、行星位置等

**3. 星盘解读内容**
- **基础解读**：各星座和行星的基本含义
- **疗愈导向解读**：结合疗愈主题，提供情绪支持和个人成长建议
- **塔罗融合解读**：将星盘能量与塔罗牌含义结合，提供综合解读
- **月相关联解读**：结合当前月相，分析月相对用户星盘的影响

**4. 个性化解读场景**
- **每日星座指引**：基于用户星座提供每日指引（结合塔罗和月相）
- **星盘深度分析**：基于完整星盘信息，提供深度分析和建议
- **能量周期分析**：分析用户星盘在当前月相周期下的能量变化
- **成长建议**：基于星盘配置，提供个人成长和疗愈建议

#### 设计逻辑

**1. 星盘模块设计原因**
- **个性化深度**：星盘信息提供更深入的个性化解读基础
- **用户需求**：星盘受众对星座和星盘解读有强烈需求
- **差异化价值**：结合塔罗+月相+星盘，形成独特的综合解读体系

**2. 疗愈导向设计**
- **设计原因**：区别于传统占星，更强调疗愈和情绪支持
- **实现方式**：解读内容更注重情绪疏导、个人成长、行动建议
- **结合方式**：星盘解读与塔罗、月相、用户情绪状态结合

**3. 信息收集策略**
- **渐进式收集**：基础信息（生日）即可提供星座指引，深度信息（时刻、坐标）用于完整星盘
- **可选信息**：出生时刻和坐标设为可选，降低用户门槛
- **信息利用**：所有收集的信息都用于提升解读的个性化程度

---

### 8. 疗愈模块（Healing & Wellness）

#### 功能描述
提供多样化的疗愈手段，包括助眠、冥想、正念等，结合app特点，通过生成式内容、白噪音等手段为用户提供疗愈支持。

#### 核心设计

**1. 疗愈类型**
- **助眠**：睡眠引导、白噪音、放松音乐
- **冥想**：冥想引导、正念练习
- **正念**：正念练习、专注训练
- **情绪调节**：情绪疏导、压力释放
- **能量恢复**：低能量状态下的恢复练习

**2. 内容生成方式**
- **AI生成**：基于用户状态和需求，AI生成个性化疗愈引导词
- **白噪音**：自然环境音（雨声、海浪、森林等）
- **音乐疗愈**：舒缓音乐、频率音乐
- **引导音频**：AI生成的语音引导（结合TTS）

**3. 个性化适配**
- **状态适配**：根据用户当前情绪状态推荐合适的疗愈内容
- **时间适配**：根据时间段推荐（早晨/午间/晚间）
- **偏好记忆**：记录用户偏好的疗愈类型，优先推荐
- **塔罗联动**：结合今日塔罗牌能量，推荐匹配的疗愈方式

**4. 交互设计**
- **时长选择**：5分钟/10分钟/20分钟等不同时长
- **场景选择**：工作前/睡前/焦虑时等不同场景
- **进度追踪**：记录用户完成的疗愈次数和时长
- **效果反馈**：疗愈前后的情绪状态对比

#### 设计逻辑

**1. 多样化疗愈手段设计原因**
- **用户需求差异**：不同用户偏好不同的疗愈方式
- **场景适配**：不同场景需要不同的疗愈手段
- **效果互补**：多种疗愈手段可以相互补充，提升效果

**2. AI生成内容设计**
- **设计原因**：结合用户状态生成个性化疗愈引导，提升适配性
- **实现方式**：基于用户情绪状态、塔罗能量、时间等生成引导词
- **结合TTS**：将生成的引导词通过TTS转为语音，提供沉浸式体验

**3. 与app特点结合**
- **塔罗联动**：疗愈内容与每日塔罗能量结合
- **月相关联**：根据月相能量推荐合适的疗愈方式
- **记忆系统**：疗愈偏好和效果记录到综合记忆库

---

### 9. 镜像句每日一问（Mirror Question）

#### 功能描述
根据每日占卜结果，提出选择题让用户选择，用户选择后给出镜像句形式的答案并加以解读，帮助用户进行自我觉察。

#### 核心设计

**1. 问题生成逻辑**
- **基于占卜结果**：根据今日塔罗牌、月相、用户情绪状态生成问题
- **选择题形式**：提供3-4个选项，用户选择最符合自己状态的选项
- **自我觉察导向**：问题设计引导用户进行自我觉察和反思

**2. 镜像句类型**

**（1）反转句（最强）**
- **格式**："你以为你在X，其实你在Y。"
- **示例**："你以为你在拖延，其实你在避免面对不够完美的自己。"
- **适用场景**：用户对自己的行为有误解或逃避时

**（2）两难句（适合焦虑人群）**
- **格式**："你现在卡住，是因为两件都想要。"
- **示例**："你既想要稳定，又想要自由；你不是矛盾，你是还没选代价。"
- **适用场景**：用户陷入两难选择，产生焦虑时

**（3）边界句（关系向命中高）**
- **格式**："你不欠别人一个解释，但你欠自己一个边界。"
- **示例**："你一直在'理解对方'，却没问过自己：我愿意吗？"
- **适用场景**：用户在关系中失去边界，过度付出时

**（4）代价句（职业/行动向命中高）**
- **格式**："你最怕的不是失败，是付出后发现不值。"
- **示例**："所以你宁愿不开始，也不愿意看见结果。"
- **适用场景**：用户因害怕失败而拖延行动时

**3. 交互流程**
- **问题展示**：每日占卜后，展示镜像句选择题
- **用户选择**：用户选择最符合自己状态的选项
- **答案展示**：显示对应的镜像句
- **深度解读**：提供镜像句的详细解读，帮助用户理解

**4. 个性化生成**
- **状态适配**：根据用户当前情绪状态选择合适的镜像句类型
- **占卜联动**：基于塔罗牌含义和用户状态生成问题
- **历史记录**：记录用户选择的镜像句，形成成长轨迹

#### 设计逻辑

**1. 镜像句设计原因**
- **自我觉察**：通过镜像句帮助用户看清自己的真实状态
- **情绪疏导**：镜像句能够直击用户内心，提供情绪支持
- **行动引导**：通过镜像句帮助用户找到行动方向

**2. 选择题形式设计**
- **设计原因**：选择题降低用户思考负担，同时引导用户进行自我反思
- **选项设计**：选项涵盖用户可能的心理状态，让用户有共鸣
- **选择反馈**：用户的选择本身也是一种自我觉察的过程

**3. 四种类型设计逻辑**
- **反转句**：用于用户对自己的行为有误解时，提供深度洞察
- **两难句**：用于焦虑状态，帮助用户看清选择的本质
- **边界句**：用于关系问题，帮助用户建立边界意识
- **代价句**：用于行动拖延，帮助用户看清恐惧的本质

---

### 10. 综合记忆库系统（Comprehensive Memory System）

#### 功能描述
根据用户的状态记录、每日占卜、每日记录、塔罗占卜、AI陪伴聊天等数据，形成综合记忆库，采用摘要和向量数据库技术，真正了解用户，进一步提升产品粘性。

#### 核心设计

**1. 数据来源**
- **状态记录**：用户情绪状态、情绪反馈
- **每日占卜**：每日塔罗牌、月相、解读内容、用户反应
- **每日记录**：用户的自述、感受、重要事件
- **塔罗占卜**：专项占卜问题、牌阵、解读、用户反馈
- **AI陪伴聊天**：小精灵 Miri与用户的对话内容、用户倾诉、情绪表达
- **镜像句选择**：用户选择的镜像句类型和选项
- **疗愈记录**：用户使用的疗愈方式、效果反馈

**2. 记忆库结构**

**（1）摘要层（Summary Layer）**
- **用户画像摘要**：性格特点、情绪模式、主要关注点
- **成长轨迹摘要**：情绪变化趋势、重复出现的主题、成长节点
- **偏好摘要**：偏好的占卜方式、疗愈方式、互动方式
- **关系模式摘要**：在关系中的行为模式、边界意识

**（2）向量数据库层（Vector Database Layer）**
- **详细记忆**：所有交互的详细记录，以向量形式存储
- **语义检索**：通过向量相似度检索相关记忆
- **上下文理解**：基于向量检索理解用户当前状态的上下文

**3. 记忆应用场景**

**（1）个性化解读**
- **占卜解读**：基于用户历史数据和记忆，生成更个性化的解读
- **星盘解读**：结合用户历史情绪和状态，提供深度星盘分析
- **镜像句生成**：根据用户历史选择和状态，生成更精准的镜像句

**（2）AI陪伴**
- **对话个性化**：小精灵 Miri基于记忆库，提供更贴合的对话
- **情感链接**：小精灵 Miri能够记住用户的重要事件和情绪，形成深度链接
- **成长见证**：小精灵 Miri能够指出用户的成长变化，给予反馈

**（3）推荐系统**
- **疗愈推荐**：基于用户历史偏好和效果，推荐合适的疗愈方式
- **占卜推荐**：基于用户关注点，推荐合适的牌阵和问题方向
- **内容推荐**：基于用户兴趣，推荐相关内容

**（4）周期总结**
- **深度分析**：基于记忆库，生成更深度的周/月总结
- **模式识别**：识别用户的情绪模式、行为模式、成长模式
- **个性化建议**：基于用户的成长轨迹，提供个性化建议

#### 设计逻辑

**1. 综合记忆库设计原因**
- **真正了解用户**：通过多维度数据，真正了解用户的性格、情绪、偏好
- **提升个性化**：基于记忆库提供更精准的个性化服务
- **增加粘性**：用户知道系统"了解"自己，形成情感依赖

**2. 摘要+向量数据库设计**
- **摘要层**：提供快速检索的用户画像，用于日常服务
- **向量数据库层**：存储详细记忆，支持语义检索和深度分析
- **两层结合**：摘要提供效率，向量数据库提供深度

**3. 隐私和安全**
- **数据加密**：用户数据加密存储
- **用户控制**：用户可以查看、修改、删除记忆库数据
- **符合法规**：符合GDPR等隐私法规要求

---

### 11. TTS语音系统（Text-to-Speech）

#### 功能描述
将文字内容转换为语音，提供语音播报功能，增强用户体验和沉浸感。

#### 核心设计

**1. 应用场景**
- **占卜解读播报**：每日占卜解读、专项占卜解读的语音播报
- **星盘解读播报**：星盘分析的语音播报
- **疗愈引导**：冥想、正念、助眠等疗愈内容的语音引导
- **AI陪伴对话**：小精灵 Miri的语音对话（结合AI陪伴系统）
- **镜像句解读**：镜像句答案和解读的语音播报

**2. 语音特性**
- **声音选择**：提供多种声音选项（温柔、权威、治愈等）
- **语速调节**：支持语速调节，适配不同用户习惯
- **情感表达**：根据内容调整语音的情感表达
- **背景音乐**：支持背景音乐和白噪音，增强沉浸感

**3. 个性化适配**
- **用户偏好**：记录用户偏好的声音类型和语速
- **场景适配**：不同场景使用不同的语音风格（占卜用权威声音，陪伴用温柔声音）
- **情感适配**：根据用户情绪状态调整语音的情感表达

#### 设计逻辑

**1. TTS设计原因**
- **沉浸体验**：语音播报提供更沉浸的体验
- **多感官刺激**：结合视觉和听觉，提升用户感知
- **使用场景**：在用户不方便阅读时（如冥想、睡前）提供语音服务

**2. 多场景应用**
- **占卜解读**：让用户能够"听"解读，而不是"读"解读
- **疗愈引导**：语音引导是疗愈内容的标准形式
- **AI陪伴**：语音对话让AI陪伴更加真实和自然

---

## 🎨 视觉与交互设计

### 设计风格
- **温柔治愈**：柔和的色彩、圆润的线条
- **仪式感**：翻牌动画、过渡效果要有仪式感
- **简洁轻量**：避免信息过载，保持"轻"的体验

### 核心视觉元素
- 塔罗牌面设计（78张标准塔罗牌）
- 牌堆交互（长按抽牌）
- 翻牌动画
- 日历视图
- 治愈任务卡片
- 占卜师头像/形象（神秘权威风格）
- 小精灵 Miri形象（可爱治愈风格，支持进化）
- 星盘可视化图形
- 疗愈模块界面（冥想、正念等场景化界面）

### 小组件设计
- iOS/Android桌面小组件
- 显示今日运势、Lucky Color、小动作建议
- 快速进入每日仪式

---

## 💰 商业化策略

### 收入模式
**订阅 + 点数 IAP（应用内购买）**

#### 订阅模式
- **基础版**：免费，每日运势 + 基础治愈任务
- **高级版**：订阅制，包含：
  - 无限专项占卜
  - 进阶追问对话额度
  - 多占卜师选择
  - 高级报告功能
  - 无广告

#### 点数系统
- 单次专项占卜解锁
- 进阶追问对话次数
- 补签次数
- 特殊占卜师解锁

#### IAA（应用内广告）
- 再议（考虑用户体验）

---

## 🎮 游戏化与留存机制

### 签到系统
- 每日运势 + 治愈任务完成 = 签到成功
- 连续签到奖励
- 补签机制（有限制）

### Avatar系统（可选）
- 主占卜师形象
- 连续签到提供消耗体系
- 摆放、装扮、挂件系统
- 给连续签到提供消耗体系

### 成就系统
- 连续签到天数
- 完成治愈任务数量
- 占卜次数
- 情绪改善记录

---

## 🔮 扩展功能（未来规划）

### 进阶占卜
- 塔罗 + 易经，东西方融合占卜
- 星盘整合
- 水晶球占卜

### 社交功能
- 分享引流（分享今日运势、报告）
- 社区功能（可选）

### 个性化
- 补全资料引导，完善资料，算的更准
- 灵魂伴侣画像
- 深度陪伴塔罗伴侣

### 其他功能
- 扫描实体牌占卜
- 通知提醒
- 好评引导
- 小组件

---

## 📊 数据与AI

### 数据收集
- 每日抽牌记录
- 情绪反馈数据
- 治愈任务完成情况
- 用户问题与占卜记录
- AI陪伴聊天记录
- 镜像句选择记录
- 星盘信息（生日、出生时刻、坐标）
- 疗愈使用记录和效果反馈
- 用户状态记录和自述

### AI能力
- 个性化解读生成（基于综合记忆库）
- 周期报告生成（周/月总结）
- 情绪曲线分析
- 多占卜师人设（不同LLM/prompt）
- AI陪伴对话（小精灵 Miri对话系统）
- 镜像句生成（基于用户状态和占卜结果）
- 疗愈内容生成（个性化疗愈引导词）
- 综合记忆库管理（摘要和向量数据库）

### 数据隐私
- 用户数据加密存储
- 符合GDPR等隐私法规
- 用户可导出/删除数据

---

## 🚀 技术方案

### 前端
- **框架**：Flutter（跨平台）
- **设计工具**：Figma

### 后端
- 用户数据存储
- AI服务集成
- 支付系统集成
- 推送通知

### 第三方服务
- **LLM API（多占卜师）**：
  - **DeepSeek API**（Demo 阶段使用）
    - API Key 已配置（见 `API_CONFIG.md`）
    - 占卜师人设：Luna（温柔型）
  - ChatGPT API (OpenAI) - 后续添加
  - Gemini API (Google) - 后续添加
  - 每个LLM使用不同的prompt模板定义占卜师人设
  - 详细配置见 [`API_CONFIG.md`](./API_CONFIG.md)
- **月相数据**：
  - **推荐方案**：本地计算（Flutter `moon_phase` 包）
  - **备选方案**：第三方API（彩云天气、心知天气等）
  - 详见 [`MOON_PHASE_API_RECOMMENDATIONS.md`](./MOON_PHASE_API_RECOMMENDATIONS.md)
- **星盘计算**：
  - 星盘计算库（本地计算或第三方API）
  - 星盘可视化库
- **TTS服务**（语音播报）
  - 文字转语音API
  - 多种声音选项
  - 情感表达支持
- **向量数据库**（综合记忆库）
  - 向量数据库服务（如Pinecone、Weaviate等）
  - 语义检索能力
- **白噪音/音乐资源**
  - 白噪音库
  - 疗愈音乐库
- 支付SDK（IAP）
- 分析工具

---

## 📅 开发里程碑（待细化）

### Phase 1: MVP
- [ ] 每日运势（抽牌 + 月相综合分析 + 基础解读）
- [ ] 基础治愈任务库
- [ ] 简单日历视图（签到 + 基础记录）
- [ ] 用户注册/登录
- [ ] 周总结（基础版）
- [ ] 基础AI陪伴（小精灵 Miri基础对话）

### Phase 2: 核心功能
- [ ] 专项占卜（3张/5张牌阵）
- [ ] 多占卜师系统（DeepSeek/ChatGPT/Gemini）
- [ ] 周期总结（完整周/月报告，包含月相分析）
- [ ] 进阶追问对话
- [ ] 星盘模块（基础星盘计算和解读）
- [ ] 疗愈模块（基础疗愈内容）
- [ ] TTS语音系统
- [ ] 镜像句每日一问

### Phase 3: 深度功能
- [ ] AI陪伴系统完善（亲密度系统、进化系统）
- [ ] 综合记忆库系统（摘要+向量数据库）
- [ ] 星盘模块完善（完整星盘分析、塔罗融合）
- [ ] 疗愈模块完善（AI生成内容、多样化疗愈手段）
- [ ] 游戏化系统（签到、成就）
- [ ] 小组件
- [ ] 社交分享

### Phase 4: 高级功能
- [ ] 塔罗+易经融合
- [ ] 扫描实体牌
- [ ] Avatar系统（占卜师和小精灵 Miri的完整视觉系统）

---

## ❓ 待确认问题

详见下方"关键问题"章节。

---

## 📝 更新日志

- 2024-XX-XX: 初版文档创建
- 2024-XX-XX: 更新核心差异化（塔罗+月相综合分析）
- 2024-XX-XX: 更新多占卜师系统技术实现（DeepSeek/ChatGPT/Gemini）
- 2024-XX-XX: 确认第一版不包含多占卜师对比功能

