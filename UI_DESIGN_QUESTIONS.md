# 每日塔罗 + 主界面设计疑问清单

## 🎯 核心功能疑问

### Q1: 每日占卜流程的触发时机 ✅ 已确认
- **问题**：用户每日首次打开 App 时自动进入每日占卜页面，还是需要手动点击某个入口？
- **影响**：如果用户想跳过今日占卜，直接查看之前的内容，应该如何处理？
- **✅ 已确认答案**：
  - 每天凌晨用户第一次进入 app，自动触发全屏占卜页面
  - 右上角有跳过按钮，点击后直接进入主界面
  - 主界面突出显示"今日占卜"按钮，引导用户完成每日占卜

---

### Q2: 每日占卜是否可以重复进行
- **问题**：用户完成每日占卜后，是否可以重新进行？还是每天只能占卜一次？
- **影响**：如果允许重复，是否需要保存每次占卜记录？
- **建议**：
  - 允许重新占卜（用户可能想重新选择情绪状态）
  - 保留最后一次占卜结果作为"今日指引"

---

### Q3: 抽牌逻辑
- **问题**：抽牌是完全随机，还是有算法（如基于时间、用户ID等生成种子）？
- **影响**：同一用户在同一天多次抽牌是否会得到相同结果？
- **建议**：
  - 使用基于日期+用户ID的种子，确保每日结果固定
  - 或完全随机，但保存首次抽牌结果

---

## 📊 LLM 生成内容疑问

### Q4: LLM 调用的时机 ✅ 已确认
- **问题**：LLM 生成内容是在什么时候调用？
  - A. 抽牌完成后立即调用（可能需要等待）
  - B. 进入主界面时调用（异步加载）
  - C. 预先生成并缓存
- **影响**：用户体验和 API 成本
- **✅ 已确认答案**：
  - 抽牌后立即调用 LLM API
  - 显示加载状态，等待生成完成

---

### Q5: 5个分类的占卜内容生成方式 ✅ 已确认
- **问题**：
  - 是一次性生成所有5个分类的内容？
  - 还是用户点击某个分类时实时生成？
- **影响**：API 调用次数和成本
- **✅ 已确认答案**：
  - 一次性生成所有5个分类的内容
  - 用户点击分类按钮时直接加载已生成的内容（无需再次调用API）

---

### Q6: 2项具体占卜的选择逻辑
- **问题**：显示的2项占卜结果如何选择？是LLM自动选择，还是固定规则？
- **影响**：内容的相关性和准确性
- **建议**：LLM 根据塔罗+月相自动选择最相关的2个领域

---

### Q7: 综合指引与具体占卜的区别
- **问题**：
  - 综合指引（40字）是总览性的，不涉及具体领域
  - 具体占卜（2项，各80字）涉及具体领域
  - 两者之间如何区分，避免重复？
- **影响**：内容质量和用户体验
- **建议**：综合指引是"总体能量"，具体占卜是"领域建议"

---

## 🎨 UI/UX 疑问

### Q8: 滑动条的具体样式 ✅ 已确认
- **问题**：
  - 滑动条是连续的还是分段的？
  - 5个档位是否固定位置（如5个等分点）？
  - 是否有动画效果？
- **✅ 已确认答案**：
  - 分段滑动条，5个固定档位
  - 滑动时有平滑动画

---

### Q9: 抽牌交互方式 ✅ 已确认
- **问题**：你提到"长按牌堆抽牌"，是否也支持点击？还是只有长按？
- **影响**：用户操作习惯
- **✅ 已确认答案**：
  - Demo 阶段同时支持长按和点击
  - 长按更有仪式感，点击更快捷

---

### Q10: 主界面布局与滚动
- **问题**：主界面内容较多，是否支持滚动？还是固定布局？
- **影响**：不同屏幕尺寸的适配
- **建议**：支持垂直滚动，确保所有内容可见

---

### Q11: 分类按钮的交互方式 ✅ 已确认
- **问题**：点击分类按钮后，如何展示内容？
  - A. 底部弹窗（Bottom Sheet）
  - B. 页面跳转
  - C. 展开/折叠（同一页面）
  - D. 弹窗（Modal）
- **✅ 已确认答案**：
  - 展开/折叠方式，在同一页面内显示
  - 点击分类按钮展开/折叠对应内容

---

### Q12: 疗愈任务的完成状态
- **问题**：
  - 完成状态是否跨会话保存？（关闭App后重新打开，是否还显示已完成）
  - 是否允许重新完成任务？
  - 完成任务后是否有奖励或反馈？
- **建议**：保存完成状态，可以重新完成，有简单的完成动画

---

## 🔄 数据与状态管理

### Q13: 今日数据的有效期
- **问题**：
  - "今日"是按自然日（0:00-23:59）还是按24小时？
  - 跨时区用户如何处理？
- **建议**：按用户本地时间的自然日，跨时区按用户时区

---

### Q14: 历史数据保存
- **问题**：
  - 每日占卜结果是否保存到历史记录？
  - 用户是否可以查看之前的占卜结果？
- **建议**：保存历史记录，可以在日历视图中查看

---

### Q15: 离线模式
- **问题**：
  - 如果网络不好，LLM 调用失败，如何处理？
  - 是否支持离线查看已生成的内容？
- **建议**：支持离线查看已生成内容，失败时显示错误提示和重试按钮

---

## 🎯 内容生成疑问

### Q16: 情绪状态如何影响占卜结果 ✅ 已确认
- **问题**：
  - 用户选择的情绪状态（愉悦/平静/疲惫/迷茫/焦虑）是否影响LLM生成的占卜内容？
  - 还是仅用于推荐疗愈任务？
- **✅ 已确认答案**：
  - **情绪状态是重要参数**，必须影响生成内容
  - 内容要击中用户情绪，给予安慰或建议
  - 针对不同情绪状态（特别是疲惫和焦虑），提供特别温柔和关怀的内容
  - 这是"塔罗+轻疗愈"的核心差异化

---

### Q17: 幸运元素的生成逻辑
- **问题**：
  - 幸运色、饰品、数字、摆件是完全由LLM生成，还是有固定对应关系？
  - 是否需要考虑文化差异（中英文用户可能有不同偏好）？
- **建议**：LLM生成，但可以设定一些规则（如塔罗牌对应某些颜色）

---

### Q18: 疗愈任务的生成数量
- **问题**：
  - 是否只生成一个疗愈任务？
  - 完成一个任务后，是否可以生成新的任务？
  - 是否有"再来一个"功能？
- **建议**：默认一个，完成后可以解锁"再来一个"（最多2-3个）

---

## 📱 技术实现疑问

### Q19: LLM Prompt 设计 ✅ 已确认
- **问题**：
  - 综合指引、具体占卜、分类占卜是否需要分别调用LLM？
  - 还是一次性生成所有内容？
- **影响**：API调用成本和响应时间
- **✅ 已确认答案**：
  - 尝试一次性生成所有内容
  - 详细 Prompt 模板见 [`LLM_PROMPT_TEMPLATE.md`](./LLM_PROMPT_TEMPLATE.md)

---

### Q20: 图片资源
- **问题**：
  - 塔罗牌图片是本地资源还是网络加载？
  - 月相图标是emoji还是自定义图片？
- **建议**：塔罗牌图片本地资源，月相使用emoji

---

### Q21: 分享功能
- **问题**：
  - 是否支持分享今日占卜结果？
  - 分享什么内容？（综合指引、塔罗牌、月相等）
- **建议**：支持分享，生成精美的分享卡片

---

## 🎨 视觉设计疑问

### Q22: 主题色和品牌色
- **问题**：
  - 是否有特定的品牌色或主题色？
  - 是否需要支持深色模式？
- **建议**：确定品牌色，支持深色模式（可选）

---

### Q23: 动画时长和风格
- **问题**：
  - 抽牌动画时长多久？（1秒？2秒？）
  - 动画风格是快速还是缓慢有仪式感？
- **建议**：1.5-2秒，缓慢有仪式感

---

### Q24: 塔罗牌显示方式
- **问题**：
  - 在主界面，塔罗牌是显示完整卡片还是缩略图？
  - 是否支持点击查看大图？
- **建议**：显示完整卡片，支持点击查看详情

---

## ✅ 优先级确认

### Q25: MVP 版本的功能范围
- **问题**：第一版是否包含所有上述功能，还是部分功能？
- **建议 MVP 范围**：
  - ✅ 每日占卜流程（情绪选择 + 抽牌）
  - ✅ 主界面基础展示（月相、塔罗、综合指引）
  - ✅ 疗愈任务（1个）
  - ✅ 分类按钮（5个，点击查看）
  - ✅ 幸运元素（4个）
  - ❓ 2项具体占卜（是否需要？）
  - ❓ 分享功能（可选）

---

## 📝 其他疑问

### Q26: 错误处理
- **问题**：
  - LLM API 调用失败时，如何提示用户？
  - 是否有重试机制？
- **建议**：友好的错误提示，支持重试

---

### Q27: 首次使用引导
- **问题**：
  - 新用户首次使用时，是否需要引导教程？
  - 如何让用户理解"选择情绪状态"和"抽牌"的操作？
- **建议**：简单的引导动画或提示

---

### Q28: 多语言支持
- **问题**：
  - 初始版本是否支持多语言？
  - LLM 生成的内容是否需要中英文切换？
- **建议**：根据目标市场决定（主推英文区）

---

## 🚀 下一步行动

**请优先回答以下关键问题**：
1. Q1: 每日占卜的触发时机
2. Q4: LLM 调用时机
3. Q5: 5个分类的生成方式
4. Q11: 分类按钮的交互方式
5. Q19: LLM Prompt 设计（一次生成还是多次）
6. Q25: MVP 功能范围

**回答这些问题后，可以开始：**
1. 细化 UI 设计
2. 设计 LLM Prompt 模板
3. 开始 Flutter 开发

---

**请逐一回答上述问题，我将根据你的回答完善设计文档并开始实现。**

